# =============================================================================
# 编译器设置
# =============================================================================
CXX := g++

# =============================================================================
# 路径设置
# =============================================================================
BUILD_DIR := ../../build
SRC_DIR := ./src
INCLUDE_DIR := ./../../include
THIRD_PARTY_DIR := ./../../third_party

INCLUDES := -I./../../include -I./../../third_party

# 主程序源文件
MAIN_SRC := main.cc
# 主程序对象文件
MAIN_OBJ := $(BUILD_DIR)/main.o

# =============================================================================
# 编译标志
# =============================================================================
CXXSTAND := -std=c++17
CXXFLAGS := $(CXXSTAND) -I$(INCLUDE_DIR) -I$(THIRD_PARTY_DIR)

# =============================================================================
# 最终目标
# =============================================================================
TARGET := test

# =============================================================================
# 默认目标
# =============================================================================
all: $(TARGET)

# =============================================================================
# 目标的规则
# =============================================================================
# 编译最终可执行文件
$(TARGET): $(MAIN_OBJ) $(OBJ_FILES)
	$(CXX) $(CXXFLAGS) -o $@ $(MAIN_OBJ) $(OBJ_FILES) $(LDFLAGS)

# 编译主程序对象文件
$(MAIN_OBJ): $(MAIN_SRC)
	@mkdir -p $(BUILD_DIR)
	$(CXX) $(CXXFLAGS) -c $< -o $@


# =============================================================================
# 清理规则
# =============================================================================
.PHONY: clean
clean:
	rm -rf $(BUILD_DIR) $(TARGET)
